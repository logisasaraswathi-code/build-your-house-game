<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Statistics House Builder Game</title>
<style>
body{
  font-family: Arial;
  text-align:center;
  background:#f4f4f4;
}
.container{
  background:white;
  padding:20px;
  margin:20px auto;
  width:90%;
  max-width:900px;
  border-radius:10px;
  box-shadow:0 0 10px rgba(0,0,0,0.2);
}
button{
  padding:10px 15px;
  margin:5px;
  border:none;
  border-radius:5px;
  cursor:pointer;
  background:#007bff;
  color:white;
}
button:hover{
  background:#0056b3;
}
.choice{
  display:inline-block;
  margin:10px;
  cursor:pointer;
}
.choice svg{
  width:120px;
  height:100px;
  border:3px solid transparent;
  border-radius:8px;
}
.choice.selected svg{
  border-color:green;
}
#housePreview{
  margin-top:20px;
}
</style>
</head>
<body>

<div class="container" id="stage1">
<h2>Stage 1: Earn Money</h2>
<p>Money: â‚¹<span id="money">0</span></p>
<p>Round: <span id="round">1</span>/5</p>
<p id="question"></p>
<div id="answers"></div>
<p id="message"></p>
</div>

<div class="container" id="stage2" style="display:none;">
<h2>Stage 2: Build Your House (Budget â‚¹20000)</h2>
<p>Money: â‚¹<span id="money2">20000</span></p>

<h3>Select Wall Color</h3>
<div class="choice" onclick="selectWall('#f4c2c2', this)">
<svg><rect width="120" height="100" fill="#f4c2c2"/></svg>
<p>Light Pink (â‚¹3000)</p>
</div>

<div class="choice" onclick="selectWall('#d4edda', this)">
<svg><rect width="120" height="100" fill="#d4edda"/></svg>
<p>Light Green (â‚¹3000)</p>
</div>

<div class="choice" onclick="selectWall('#d6e4ff', this)">
<svg><rect width="120" height="100" fill="#d6e4ff"/></svg>
<p>Light Blue (â‚¹3000)</p>
</div>

<h3>Select Roof</h3>
<div class="choice" onclick="selectRoof('#8b0000', this)">
<svg><polygon points="0,80 60,10 120,80" fill="#8b0000"/></svg>
<p>Red Roof (â‚¹4000)</p>
</div>

<div class="choice" onclick="selectRoof('#444', this)">
<svg><polygon points="0,80 60,10 120,80" fill="#444"/></svg>
<p>Dark Roof (â‚¹4000)</p>
</div>

<h3>Select Door</h3>
<div class="choice" onclick="selectDoor('#654321', this)">
<svg><rect x="40" y="30" width="40" height="70" fill="#654321"/></svg>
<p>Wood Door (â‚¹3000)</p>
</div>

<div class="choice" onclick="selectDoor('#222', this)">
<svg><rect x="40" y="30" width="40" height="70" fill="#222"/></svg>
<p>Modern Door (â‚¹3000)</p>
</div>

<br><br>
<button onclick="finish()">Finish Construction</button>
<p id="msg2"></p>
</div>

<div class="container" id="stage3" style="display:none;">
<h2>Stage 3: Your Final House</h2>
<div id="housePreview"></div>
</div>

<script>
// ===== STAGE 1 =====
let money = 0;
let round = 1;

const rounds = [
  {q:"You helped a friend carry bags. Which action gives the best reward?", 
   options:["Carry small loads","Carry big loads","Organize the bags"], correct:1, reward:4000},
  {q:"You cleaned a yard. What should you do?", 
   options:["Sweep yard","Trim bushes","Move logs"], correct:0, reward:4000},
  {q:"Sold lemonade today. What brings max money?", 
   options:["Serve cups","Mix lemonade","Decorate booth"], correct:2, reward:4000},
  {q:"Folded clothes at home. Best choice?", 
   options:["Fold neatly","Sort colors","Stack fast"], correct:0, reward:4000},
  {q:"Helped pack boxes at shop. Choose wisely.", 
   options:["Pack carefully","Stack boxes","Label items"], correct:0, reward:4000}
];

function showRound(){
  if(round>5){
    // End of stage1
    if(money >= 20000){
      document.getElementById("stage1").style.display="none";
      document.getElementById("stage2").style.display="block";
    } else {
      document.getElementById("message").innerText="ðŸ’¸ Not enough money to build the house. Restart Stage 1.";
      money=0; round=1;
      setTimeout(initStage1,2000);
    }
    return;
  }
  document.getElementById("round").innerText=round;
  document.getElementById("message").innerText="";
  const current = rounds[round-1];
  document.getElementById("question").innerText=current.q;
  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML="";
  current.options.forEach((opt,i)=>{
    const btn = document.createElement("button");
    btn.textContent=opt;
    btn.onclick = ()=>checkAnswer(i);
    answersDiv.appendChild(btn);
  });
}

function checkAnswer(i){
  const current = rounds[round-1];
  if(i === current.correct){
    money += current.reward;
    document.getElementById("money").innerText=money;
    document.getElementById("message").innerText=`âœ… Correct! You earned â‚¹${current.reward}`;
  } else {
    document.getElementById("message").innerText="âŒ Wrong! No money earned this round.";
  }
  round++;
  setTimeout(showRound,800);
}

function initStage1(){
  document.getElementById("money").innerText=money;
  showRound();
}
initStage1();

// ===== STAGE 2 =====
let budget=20000;
let wallColor="#fff";
let roofColor="#8b0000";
let doorColor="#654321";

function selectWall(color,el){
  if(budget>=3000){
    wallColor=color;
    budget-=3000;
    document.getElementById("money2").innerText=budget;
    highlight(el);
  }
}

function selectRoof(color,el){
  if(budget>=4000){
    roofColor=color;
    budget-=4000;
    document.getElementById("money2").innerText=budget;
    highlight(el);
  }
}

function selectDoor(color,el){
  if(budget>=3000){
    doorColor=color;
    budget-=3000;
    document.getElementById("money2").innerText=budget;
    highlight(el);
  }
}

function highlight(element){
  let choices=document.querySelectorAll(".choice");
  choices.forEach(c=>c.classList.remove("selected"));
  element.classList.add("selected");
}

function finish(){
  document.getElementById("stage2").style.display="none";
  document.getElementById("stage3").style.display="block";

  document.getElementById("housePreview").innerHTML=`
  <svg width="400" height="300">
    <rect x="100" y="120" width="200" height="150" fill="${wallColor}" stroke="black"/>
    <polygon points="90,120 200,40 310,120" fill="${roofColor}" stroke="black"/>
    <rect x="180" y="180" width="40" height="90" fill="${doorColor}" stroke="black"/>
    <rect x="120" y="150" width="40" height="40" fill="#87ceeb" stroke="black"/>
    <rect x="240" y="150" width="40" height="40" fill="#87ceeb" stroke="black"/>
  </svg>
  `;
}
</script>

</body>
</html>
