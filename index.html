<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dream House Builder Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {font-family: Arial, sans-serif; text-align: center; margin:0; padding:0; background:#eef3f7;}
h1,h2 {color:#2c3e50;}
.hidden {display:none;}
button {padding:10px 15px; margin:5px; font-size:16px; cursor:pointer;}
img.choice {width:80px; height:80px; border:2px solid #444; margin:5px; cursor:pointer;}
.selected {border:4px solid #000 !important;}
#houseDisplay {position:relative; width:300px; height:300px; margin:20px auto; background:url('https://i.imgur.com/8bRdbIZ.png') no-repeat center/cover;}
#moneyDisplay {font-size:24px; margin:15px 0;}
#feedback {min-height:30px; font-size:18px;}
</style>
</head>
<body>

<h1>‚öíÔ∏è Dream House Builder Adventure</h1>

<!-- STAGE 1 -->
<div id="stage1">
  <div id="moneyDisplay">Money: ‚Çπ0</div>
  <div id="scenarioQ"></div>
  <div id="feedback"></div>
  <div>Round: <span id="roundNum">1</span>/5</div>
</div>

<!-- STAGE 2 -->
<div id="stage2" class="hidden">
  <h2>üèóÔ∏è Design Your House</h2>
  <div>Remaining Money: ‚Çπ<span id="remaining">20000</span></div>

  <h3>Choose Wall Color</h3>
  <img src="https://i.imgur.com/4AiXzf8.png" class="choice wall" data-color="#ffcccc">
  <img src="https://i.imgur.com/0XUvrqF.png" class="choice wall" data-color="#ccffcc">
  <img src="https://i.imgur.com/XrpowUA.png" class="choice wall" data-color="#ccccff">

  <h3>Choose Roof Style</h3>
  <img src="https://i.imgur.com/H7gM0gW.png" class="choice roof" data-roof="style1">
  <img src="https://i.imgur.com/qXyx0lF.png" class="choice roof" data-roof="style2">
  <img src="https://i.imgur.com/YVrUJQj.png" class="choice roof" data-roof="style3">

  <h3>Choose Bricks</h3>
  <img src="https://i.imgur.com/EFfAl1y.png" class="choice brick" data-brick="Standard" data-cost="2000">
  <img src="https://i.imgur.com/Orw9H0L.png" class="choice brick" data-brick="Red" data-cost="3000">
  <img src="https://i.imgur.com/X5rzs5o.png" class="choice brick" data-brick="Decorative" data-cost="4000">

  <h3>Choose Furniture</h3>
  <img src="https://i.imgur.com/1h3S6hK.png" class="choice furniture" data-item="Sofa" data-cost="3000">
  <img src="https://i.imgur.com/fUe0J2N.png" class="choice furniture" data-item="Bed" data-cost="2500">
  <img src="https://i.imgur.com/k3UM6xF.png" class="choice furniture" data-item="Table" data-cost="1500">

  <h3>Choose Decorations</h3>
  <img src="https://i.imgur.com/zFzpKqf.png" class="choice decor" data-item="Painting" data-cost="1000">
  <img src="https://i.imgur.com/4x0gYx2.png" class="choice decor" data-item="Lamp" data-cost="700">
  <img src="https://i.imgur.com/pdY7s4J.png" class="choice decor" data-item="Curtain" data-cost="800">

  <button onclick="finishDesign()">üè° Build House</button>
  <div id="allocFeedback" style="color:red; margin-top:10px;"></div>
</div>

<!-- STAGE 3 -->
<div id="stage3" class="hidden">
  <h2>üéâ Your Dream House</h2>
  <div id="houseDisplay"></div>
  <div id="finalMsg" style="font-size:22px; margin-top:15px;"></div>
</div>

<script>
// ======= STAGE 1 =======
let money=0, round=1;
const scenarioQ = document.getElementById("scenarioQ");
const feedback = document.getElementById("feedback");
const moneyDisplay = document.getElementById("moneyDisplay");
const roundNum = document.getElementById("roundNum");

const scenarios = [
  {q:"You found extra work helping neighbors. Choose action:",
   opt:["Volunteer to help for pay","Ask neighbors for supplies","Use skills for hire"],
   reward:[4000,3500,4500]},
  {q:"A rainstorm damaged a fence. What do you do?",
   opt:["Help fix for pay","Sell wood pieces","Offer cleanup service"],
   reward:[4000,3500,4500]},
  {q:"Local festival needs helpers. What do you choose?",
   opt:["Manage booths","Clean area","Guide visitors"],
   reward:[4000,3500,4500]},
  {q:"Farmers need hands for harvest. Your choice:",
   opt:["Harvest crops","Transport baskets","Feed animals"],
   reward:[4000,3500,4500]},
  {q:"Community needs painters. Choose role:",
   opt:["Paint walls","Mix paint","Help clean up"],
   reward:[4000,3500,4500]}
];

function showRound(){
  if(round>5){ endStage1(); return; }
  const s = scenarios[round-1];
  scenarioQ.innerHTML="<h3>"+s.q+"</h3>";
  s.opt.forEach((o,i)=>{
    scenarioQ.innerHTML+=`<button onclick="earn(${i})">${o}</button>`;
  });
}
function earn(i){
  let gained = scenarios[round-1].reward[i];
  money += gained;
  moneyDisplay.innerText="Money: ‚Çπ"+money;
  feedback.innerText="‚úÖ You earned ‚Çπ"+gained;
  feedback.style.color="green";
  round++;
  roundNum.innerText=round;
  setTimeout(showRound,400);
}
function endStage1(){
  if(money>=20000){
    document.getElementById("stage1").classList.add("hidden");
    document.getElementById("stage2").classList.remove("hidden");
  } else {
    feedback.innerText="üí∏ Not enough money earned. Restarting...";
    setTimeout(()=>{money=0;round=1;moneyDisplay.innerText="Money: ‚Çπ0";roundNum.innerText="1"; showRound();},2000);
  }
}
showRound();

// ======= STAGE 2 =======
let remaining=20000;
document.getElementById("remaining").innerText=remaining;
let designChoices={wallColor:null,roof:null,brick:null,cement:null,furniture:[],decor:[]};

document.querySelectorAll(".wall").forEach(el=>{
  el.onclick=function(){
    document.querySelectorAll(".wall").forEach(x=>x.classList.remove("selected"));
    this.classList.add("selected");
    designChoices.wallColor=this.dataset.color;
  };
});
document.querySelectorAll(".roof").forEach(el=>{
  el.onclick=function(){
    document.querySelectorAll(".roof").forEach(x=>x.classList.remove("selected"));
    this.classList.add("selected");
    designChoices.roof=this.dataset.roof;
  };
});
document.querySelectorAll(".brick").forEach(el=>{
  el.onclick=function(){
    let cost=parseInt(this.dataset.cost);
    if(remaining>=cost){
      document.querySelectorAll(".brick").forEach(x=>x.classList.remove("selected"));
      this.classList.add("selected");
      designChoices.brick=this.dataset.brick;
      designChoices.cement=null;
      designChoices.cement=this.dataset.brick;
      remaining-=cost;
      document.getElementById("remaining").innerText=remaining;
    }
  };
});
document.querySelectorAll(".furniture").forEach(el=>{
  el.onclick=function(){
    let cost=parseInt(this.dataset.cost);
    if(remaining>=cost){
      this.classList.add("selected");
      designChoices.furniture.push(this.dataset.item);
      remaining-=cost;
      document.getElementById("remaining").innerText=remaining;
    }
  };
});
document.querySelectorAll(".decor").forEach(el=>{
  el.onclick=function(){
    let cost=parseInt(this.dataset.cost);
    if(remaining>=cost){
      this.classList.add("selected");
      designChoices.decor.push(this.dataset.item);
      remaining-=cost;
      document.getElementById("remaining").innerText=remaining;
    }
  };
});

function finishDesign(){
  if(!designChoices.wallColor||!designChoices.roof){
    document.getElementById("allocFeedback").innerText="Choose wall & roof first!";
    return;
  }
  document.getElementById("stage2").classList.add("hidden");
  document.getElementById("stage3").classList.remove("hidden");
  showHouse();
}

// ======= STAGE 3 =======
function showHouse(){
  const house = document.getElementById("houseDisplay");
  house.style.backgroundColor=designChoices.wallColor;

  // roof overlay
  let roofImg=new Image();
  if(designChoices.roof=="style1") roofImg.src="https://i.imgur.com/H7gM0gW.png";
  if(designChoices.roof=="style2") roofImg.src="https://i.imgur.com/qXyx0lF.png";
  if(designChoices.roof=="style3") roofImg.src="https://i.imgur.com/YVrUJQj.png";
  roofImg.style.position="absolute"; roofImg.style.top="0"; roofImg.style.width="300px";
  house.appendChild(roofImg);

  // place furniture & decor labels
  let y=140;
  designChoices.furniture.forEach(item=>{
    let div=document.createElement("div");
    div.innerText=item; div.style.position="absolute"; div.style.top=(y)+"px"; div.style.left="10px"; div.style.fontWeight="bold";
    house.appendChild(div);
    y+=25;
  });
  designChoices.decor.forEach(item=>{
    let div=document.createElement("div");
    div.innerText=item; div.style.position="absolute"; div.style.top=(y)+"px"; div.style.right="10px"; div.style.fontWeight="bold";
    house.appendChild(div);
    y+=25;
  });

  document.getElementById("finalMsg").innerText="üéâ Congratulations! Your Dream House is Built!";
}
</script>

</body>
</html>
